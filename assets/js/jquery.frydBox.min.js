/*
 * frydBox - jQuery plugin
 * Free and lightweight Lightbox or Fancybox alternative
 * 
 * Copyright (c) 2017 Kamil Frydlewicz
 * www.frydlewicz.pl
 * 
 * Version: 1.0.0
 * Requires: jQuery v1.2+
 *
 * MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
(function(h){var E="frydBox";var k={"box-sizing":"border-box",padding:"0",margin:"0",outline:"none",opacity:"1"};var d=h.extend({display:"none",position:"fixed",left:"0",top:"0","z-index":"999999997",width:"100%",height:"100%",border:"none"},k);var m=h.extend({display:"none",position:"fixed","z-index":"999999998",border:"none"},k);var b=h.extend({position:"absolute",left:"0",top:"25%","z-index":"999999999",width:"50%",height:"50%",overflow:"hidden","font-size":"10000px",cursor:"pointer"},k);var c=h.extend({position:"absolute",right:"0",top:"25%","z-index":"999999999",width:"50%",height:"50%",overflow:"hidden","font-size":"10000px",cursor:"pointer"},k);var j=h.extend({display:"none",width:"100%",height:"auto"},k);var D={prefix:"frydBox_",lazyLoading:true,lazyLoadingDelay:100,fadeDuration:400,moveDuration:800,screenPercent:0.88,backOpacity:0.6,shadowOpacity:0.6,shadowSize:18,borderSize:13,borderColor:"white",borderRadius:8,scrollBars:false};var q;var A;var o=undefined;var t;var z;var y;var p;var r;function B(){t=h(window).width();z=h(window).height();y=D.screenPercent*t;p=D.screenPercent*z}function w(F){switch(F.which){case 27:e();break;case 37:f(o);break;case 39:g(o);break}}function x(H,F){for(var G in H){F.css(G,H[G])}}function n(){console.log(E+": powered by www.frydlewicz.pl");q=h("body");r=q.css("overflow");h(window).bind("resize",B);h(document).bind("keydown",w);B();a()}function a(){A=h('<div id="'+D.prefix+'back" class="'+D.prefix+'back"></div>');x(d,A);A.css("background","rgba(0, 0, 0, "+D.backOpacity+")");A.bind("click",function(){e()});q.append(A)}function l(F){var G=h('<div id="'+D.prefix+"cont-"+F+'" class="'+D.prefix+'cont"></div>');x(m,G);q.append(G);return G}function i(I,H){var G=h('<span id="'+D.prefix+"prev-"+H+'" class="'+D.prefix+'prev">&nbsp;</span>');x(b,G);G.bind("click",function(){f(I)});I.append(G);var F=h('<span id="'+D.prefix+"next-"+H+'" class="'+D.prefix+'next">&nbsp;</span>');x(c,F);F.bind("click",function(){g(I)});I.append(F)}function u(I,J,H,F){var G=h('<img id="'+D.prefix+"img-"+H+"-"+F+'" class="'+D.prefix+'img">');x(j,G);G.attr("data-src",J);I.append(G);return G}function s(K,H){var I=parseInt(H[0]["naturalWidth"])+2*D.borderSize;var F=parseInt(H[0]["naturalHeight"])+2*D.borderSize;if(I===0||F===0){return{left:(t-y)/2,top:(z-y)/2}}var J=I;var G=F;if(I/F>t/z){if(I>t){J=y;G=y*F/I}}else{if(F>z){G=p;J=p*I/F}}K.css({width:Math.round(J)+"px",height:Math.round(G)+"px"});return{left:(t-J)/2,top:(z-G)/2}}function e(){h("."+D.prefix+"cont").fadeOut(D.fadeDuration,function(){var F=h(this).find("."+D.prefix+"img");F.hide();F.removeClass(D.prefix+"active")});A.fadeOut(D.fadeDuration,function(){if(!D.scrollBars){q.css("overflow",r)}});o=undefined}function C(J){J.preventDefault();var H=h(this).attr("data-cont");var F=h(this).attr("data-img");var I=h("#"+D.prefix+"cont-"+H);var G=h("#"+D.prefix+"img-"+H+"-"+F);G.unbind("load").bind("load",function(){var K=s(I,G);I.css({left:Math.round(K.left)+"px",top:Math.round(K.top)+"px"});G.show();I.fadeIn(D.fadeDuration)});if(!D.scrollBars){q.css("overflow","hidden")}A.fadeIn(D.fadeDuration,function(){var K=G.attr("data-src");G.attr("src",K);G.addClass(D.prefix+"active")});o=I}function f(H){if(typeof H==="undefined"){return}var F=H.find("."+D.prefix+"active");if(F.length===0){return}var G=F.prev("."+D.prefix+"img");if(G.length===0){return}G.unbind("load").bind("load",function(){H.animate({left:t+"px"},D.moveDuration,function(){H.css("left",-t+"px");F.hide();G.show();var J=s(H,G);H.css("top",Math.round(J.top)+"px");H.animate({left:Math.round(J.left)+"px"},D.moveDuration)})});var I=G.attr("data-src");G.attr("src",I);F.removeClass(D.prefix+"active");G.addClass(D.prefix+"active")}function g(H){if(typeof H==="undefined"){return}var F=H.find("."+D.prefix+"active");if(F.length===0){return}var G=F.next("."+D.prefix+"img");if(G.length===0){return}G.unbind("load").bind("load",function(){H.animate({left:-t+"px"},D.moveDuration,function(){H.css("left",t+"px");F.hide();G.show();var J=s(H,G);H.css("top",Math.round(J.top)+"px");H.animate({left:Math.round(J.left)+"px"},D.moveDuration)})});var I=G.attr("data-src");G.attr("src",I);F.removeClass(D.prefix+"active");G.addClass(D.prefix+"active")}function v(G){function F(I){if(I>=G.length){return}var H=new Image();H.onload=function(){setTimeout(F,D.lazyLoadingDelay,I+1)};H.src=G[I]}setTimeout(F,D.lazyLoadingDelay,0)}window[E]={count:0};h.fn.frydBox=function(H){h.extend(D,H);if(window[E].count===0){n()}var I=l(window[E].count);i(I,window[E].count);var G=0;var J=[];var F=h(this).each(function(){var K=h(this).attr("href");J.push(K);var L=u(I,K,window[E].count,G);L.css("border",D.borderSize+"px solid "+D.borderColor);L.css("border-radius",D.borderRadius+"px");L.css("box-shadow","0 0 "+D.shadowSize+"px rgba(0, 0, 0, "+D.shadowOpacity+")");h(this).attr("data-cont",window[E].count);h(this).attr("data-img",G);h(this).unbind("click").bind("click",C);++G});if(D.lazyLoading){if(document.readyState==="complete"){v(J)}else{h(window).bind("load",function(){v(J)})}}++window[E].count;return F}}(jQuery));